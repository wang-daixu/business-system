{"version":3,"sources":["webpack:///./src/api/integral.js","webpack:///./src/views/Console/Integral/integral.vue?8560","webpack:///./src/views/Console/Integral/integral.vue?af30","webpack:///src/views/Console/Integral/integral.vue","webpack:///./src/views/Console/Integral/integral.vue?edfd","webpack:///./src/views/Console/Integral/integral.vue"],"names":["addIntegralProduct","product_name","conversion_integral","data","service","request","method","url","params","integralProductList","currentPage","pageSize","revampIntegralProduct","convertibility_id","deleteIntegralProduct","searchIntegralProduct","conversion","phone_number","integral","forRecord","searchForRecord","phone","deleteForRecord","record_id","render","_vm","this","_h","$createElement","_c","_self","attrs","_v","staticClass","nativeOn","$event","type","indexOf","_k","keyCode","key","searchBtn","model","value","callback","$$v","searchName","expression","slot","on","addBounced","add_name","add_integral","exportExcel","ref","staticStyle","tableData","handleCurrentChange","scopedSlots","_u","fn","scope","conversionBtn","row","currentRow","editBounced","edit_name","edit_integral","handleDelete","total","currentChange","addConversionBtn","handleRedact","staticRenderFns","created","getIntegralProductList","methods","res","code","message","$message","$prompt","confirmButtonText","cancelButtonText","val","wb","wbout","bookType","bookSST","console","log","e","$confirm","component"],"mappings":"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","file":"js/chunk-73b91714.0e7ce25f.js","sourcesContent":["import service from \"@/utils/request\";\r\n\r\n//添加兑换产品\r\nexport async function addIntegralProduct(product_name, conversion_integral) {\r\n  const data = service.request({\r\n    method: \"get\",\r\n    url: \"/console/addIntegralProduct\",\r\n    params: {\r\n      product_name,\r\n      conversion_integral\r\n    }\r\n  });\r\n  return data;\r\n}\r\n\r\n//获取兑换产品列表\r\nexport async function integralProductList(currentPage, pageSize) {\r\n  const data = service.request({\r\n    method: \"get\",\r\n    url: \"/console/integralProductList\",\r\n    params: {\r\n      currentPage,\r\n      pageSize\r\n    }\r\n  });\r\n  return data;\r\n}\r\n//修改兑换产品\r\nexport async function revampIntegralProduct(\r\n  product_name,\r\n  conversion_integral,\r\n  convertibility_id\r\n) {\r\n  const data = service.request({\r\n    method: \"get\",\r\n    url: \"/console/revampIntegralProduct\",\r\n    params: {\r\n      product_name,\r\n      conversion_integral,\r\n      convertibility_id\r\n    }\r\n  });\r\n  return data;\r\n}\r\n//删除兑换产品\r\nexport async function deleteIntegralProduct(convertibility_id) {\r\n  const data = service.request({\r\n    method: \"get\",\r\n    url: \"/console/deleteIntegralProduct\",\r\n    params: {\r\n      convertibility_id\r\n    }\r\n  });\r\n  return data;\r\n}\r\n//搜索兑换产品\r\nexport async function searchIntegralProduct(product_name) {\r\n  const data = service.request({\r\n    method: \"get\",\r\n    url: \"/console/searchIntegralProduct\",\r\n    params: {\r\n      product_name\r\n    }\r\n  });\r\n  return data;\r\n}\r\n//兑换产品\r\nexport async function conversion(phone_number, integral, convertibility_id) {\r\n  const data = service.request({\r\n    method: \"get\",\r\n    url: \"/console/conversion\",\r\n    params: {\r\n      phone_number,\r\n      integral,\r\n      convertibility_id\r\n    }\r\n  });\r\n  return data;\r\n}\r\n//全部兑换记录\r\nexport async function forRecord(currentPage, pageSize) {\r\n  const data = service.request({\r\n    method: \"get\",\r\n    url: \"/console/forRecord\",\r\n    params: {\r\n      currentPage,\r\n      pageSize\r\n    }\r\n  });\r\n  return data;\r\n}\r\n//搜索兑换记录\r\nexport async function searchForRecord(phone, currentPage, pageSize) {\r\n  const data = service.request({\r\n    method: \"get\",\r\n    url: \"/console/searchForRecord\",\r\n    params: {\r\n      phone,\r\n      currentPage,\r\n      pageSize\r\n    }\r\n  });\r\n  return data;\r\n}\r\n//删除兑换记录\r\nexport async function deleteForRecord(record_id) {\r\n  const data = service.request({\r\n    method: \"get\",\r\n    url: \"/console/deleteForRecord\",\r\n    params: {\r\n      record_id\r\n    }\r\n  });\r\n  return data;\r\n}\r\n","import mod from \"-!../../../../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/_sass-loader@8.0.2@sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./integral.vue?vue&type=style&index=0&id=8be81dbe&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/_sass-loader@8.0.2@sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./integral.vue?vue&type=style&index=0&id=8be81dbe&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-container',[_c('el-header',{attrs:{\"height\":\"100px\"}},[_vm._v(\" 产品名称\"),_c('el-input',{staticClass:\"searchName\",attrs:{\"placeholder\":\"请输入相应的产品名称\"},nativeOn:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.searchBtn()}},model:{value:(_vm.searchName),callback:function ($$v) {_vm.searchName=$$v},expression:\"searchName\"}},[_c('template',{slot:\"append\"},[_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-search\"},on:{\"click\":function($event){return _vm.searchBtn()}}},[_vm._v(\"搜索\")])],1)],2)],1),_c('el-main',[_c('div',{staticClass:\"bottons\"},[_c('el-button',{attrs:{\"type\":\"success\",\"round\":\"\",\"plain\":\"\"},on:{\"click\":function($event){_vm.addBounced = true;\n          _vm.add_name = '';\n          _vm.add_integral = '';}}},[_vm._v(\"添加兑换产品\")]),_c('el-button',{attrs:{\"type\":\"warning\",\"round\":\"\",\"plain\":\"\"},on:{\"click\":function($event){return _vm.exportExcel()}}},[_vm._v(\"导出\")])],1),_c('div',[_c('el-table',{ref:\"singleTable\",staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.tableData,\"border\":\"\",\"highlight-current-row\":\"\",\"id\":\"out-table\"},on:{\"current-change\":_vm.handleCurrentChange}},[_c('el-table-column',{attrs:{\"prop\":\"convertibility_id\",\"label\":\"编号\",\"width\":\"80\"}}),_c('el-table-column',{attrs:{\"prop\":\"product_name\",\"label\":\"产品名称\",\"width\":\"300\"}}),_c('el-table-column',{attrs:{\"prop\":\"conversion_integral\",\"label\":\"消耗积分\",\"width\":\"180\"}}),_c('el-table-column',{attrs:{\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"success\",\"plain\":\"\"},on:{\"click\":function($event){return _vm.conversionBtn(scope.row)}}},[_vm._v(\"兑 换\")])]}}])})],1),_c('div',{staticStyle:{\"margin-top\":\"20px\"}},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){if (_vm.currentRow) {\n              _vm.editBounced = true;\n              _vm.edit_name = _vm.currentRow.product_name;\n              _vm.edit_integral = _vm.currentRow.conversion_integral;\n            }}}},[_vm._v(\"编 辑\")]),_c('el-button',{attrs:{\"type\":\"danger\"},on:{\"click\":_vm.handleDelete}},[_vm._v(\"删 除\")])],1)],1),_c('div',{staticClass:\"pagination\"},[_c('el-pagination',{attrs:{\"current-page\":_vm.currentPage,\"page-size\":_vm.pageSize,\"layout\":\"total,prev, pager, next, jumper\",\"total\":_vm.total},on:{\"current-change\":_vm.currentChange,\"update:currentPage\":function($event){_vm.currentPage=$event},\"update:current-page\":function($event){_vm.currentPage=$event}}})],1)]),_c('el-dialog',{attrs:{\"title\":\"添加兑换产品\",\"visible\":_vm.addBounced,\"width\":\"60%\",\"destroy-on-close\":\"\"},on:{\"update:visible\":function($event){_vm.addBounced=$event}}},[_c('el-form',[_c('el-form-item',{attrs:{\"label\":\"产品名称\",\"label-width\":\"120px\"}},[_c('el-input',{model:{value:(_vm.add_name),callback:function ($$v) {_vm.add_name=$$v},expression:\"add_name\"}})],1),_c('el-form-item',{attrs:{\"label\":\"消耗积分\",\"label-width\":\"120px\"}},[_c('el-input',{model:{value:(_vm.add_integral),callback:function ($$v) {_vm.add_integral=$$v},expression:\"add_integral\"}})],1)],1),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.addBounced = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"success\",\"plain\":\"\"},on:{\"click\":function($event){return _vm.addConversionBtn()}}},[_vm._v(\"添 加\")])],1)],1),_c('el-dialog',{attrs:{\"title\":\"产品编辑\",\"visible\":_vm.editBounced,\"width\":\"60%\",\"destroy-on-close\":\"\"},on:{\"update:visible\":function($event){_vm.editBounced=$event}}},[_c('el-form',[_c('el-form-item',{attrs:{\"label\":\"产品名称\",\"label-width\":\"120px\"}},[_c('el-input',{model:{value:(_vm.edit_name),callback:function ($$v) {_vm.edit_name=$$v},expression:\"edit_name\"}})],1),_c('el-form-item',{attrs:{\"label\":\"消耗积分\",\"label-width\":\"120px\"}},[_c('el-input',{model:{value:(_vm.edit_integral),callback:function ($$v) {_vm.edit_integral=$$v},expression:\"edit_integral\"}})],1)],1),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.editBounced = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"success\",\"plain\":\"\"},on:{\"click\":function($event){return _vm.handleRedact()}}},[_vm._v(\"保存\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <el-container>\r\n    <el-header height=\"100px\">\r\n      产品名称<el-input\r\n        placeholder=\"请输入相应的产品名称\"\r\n        v-model=\"searchName\"\r\n        class=\"searchName\"\r\n        @keyup.enter.native=\"searchBtn()\"\r\n      >\r\n        <template slot=\"append\">\r\n          <el-button type=\"primary\" icon=\"el-icon-search\" @click=\"searchBtn()\"\r\n            >搜索</el-button\r\n          ></template\r\n        >\r\n      </el-input>\r\n    </el-header>\r\n    <el-main>\r\n      <div class=\"bottons\">\r\n        <el-button\r\n          type=\"success\"\r\n          round\r\n          plain\r\n          @click=\"\r\n            addBounced = true;\r\n            add_name = '';\r\n            add_integral = '';\r\n          \"\r\n          >添加兑换产品</el-button\r\n        >\r\n        <el-button type=\"warning\" round plain @click=\"exportExcel()\"\r\n          >导出</el-button\r\n        >\r\n      </div>\r\n      <div>\r\n        <el-table\r\n          ref=\"singleTable\"\r\n          :data=\"tableData\"\r\n          border\r\n          highlight-current-row\r\n          id=\"out-table\"\r\n          @current-change=\"handleCurrentChange\"\r\n          style=\"width: 100%\"\r\n        >\r\n          <el-table-column prop=\"convertibility_id\" label=\"编号\" width=\"80\">\r\n          </el-table-column>\r\n          <el-table-column prop=\"product_name\" label=\"产品名称\" width=\"300\">\r\n          </el-table-column>\r\n          <el-table-column\r\n            prop=\"conversion_integral\"\r\n            label=\"消耗积分\"\r\n            width=\"180\"\r\n          >\r\n          </el-table-column>\r\n          <el-table-column label=\"操作\">\r\n            <template slot-scope=\"scope\">\r\n              <el-button\r\n                size=\"mini\"\r\n                type=\"success\"\r\n                plain\r\n                @click=\"conversionBtn(scope.row)\"\r\n                >兑 换</el-button\r\n              >\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n        <div style=\"margin-top: 20px\">\r\n          <el-button\r\n            @click=\"\r\n              if (currentRow) {\r\n                editBounced = true;\r\n                edit_name = currentRow.product_name;\r\n                edit_integral = currentRow.conversion_integral;\r\n              }\r\n            \"\r\n            type=\"primary\"\r\n            >编 辑</el-button\r\n          >\r\n          <el-button @click=\"handleDelete\" type=\"danger\">删 除</el-button>\r\n        </div>\r\n      </div>\r\n      <div class=\"pagination\">\r\n        <el-pagination\r\n          @current-change=\"currentChange\"\r\n          :current-page.sync=\"currentPage\"\r\n          :page-size=\"pageSize\"\r\n          layout=\"total,prev, pager, next, jumper\"\r\n          :total=\"total\"\r\n        >\r\n        </el-pagination>\r\n      </div>\r\n    </el-main>\r\n    <el-dialog\r\n      title=\"添加兑换产品\"\r\n      :visible.sync=\"addBounced\"\r\n      width=\"60%\"\r\n      destroy-on-close\r\n    >\r\n      <el-form>\r\n        <el-form-item label=\"产品名称\" label-width=\"120px\">\r\n          <el-input v-model=\"add_name\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"消耗积分\" label-width=\"120px\">\r\n          <el-input v-model=\"add_integral\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"addBounced = false\">取 消</el-button>\r\n        <el-button type=\"success\" plain @click=\"addConversionBtn()\"\r\n          >添 加</el-button\r\n        >\r\n      </div>\r\n    </el-dialog>\r\n    <el-dialog\r\n      title=\"产品编辑\"\r\n      :visible.sync=\"editBounced\"\r\n      width=\"60%\"\r\n      destroy-on-close\r\n    >\r\n      <el-form>\r\n        <el-form-item label=\"产品名称\" label-width=\"120px\">\r\n          <el-input v-model=\"edit_name\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"消耗积分\" label-width=\"120px\">\r\n          <el-input v-model=\"edit_integral\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"editBounced = false\">取 消</el-button>\r\n        <el-button type=\"success\" plain @click=\"handleRedact()\">保存</el-button>\r\n      </div>\r\n    </el-dialog>\r\n  </el-container>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n  addIntegralProduct,\r\n  integralProductList,\r\n  revampIntegralProduct,\r\n  deleteIntegralProduct,\r\n  searchIntegralProduct,\r\n  conversion\r\n} from \"@/api/integral\";\r\nimport FileSaver from \"file-saver\";\r\nimport XLSX from \"xlsx\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      searchName: \"\", //搜索内容\r\n      tableData: [], //表格内容\r\n      currentPage: 1, //当前第几页\r\n      pageSize: 10, //一页十条信息\r\n      total: 0, //产品总数\r\n      addBounced: false, //添加兑换产品弹框是否开启\r\n      editBounced: false, //产品编辑弹框是否开启\r\n      currentRow: null,\r\n      add_name: \"\", //添加弹窗中的产品名\r\n      add_integral: \"\", //添加弹窗中的所需积分\r\n      edit_name: \"\", //编辑弹窗中的产品名\r\n      edit_integral: \"\" //编辑弹窗中的所需积分\r\n    };\r\n  },\r\n  created() {\r\n    this.getIntegralProductList(this.currentPage, this.pageSize);\r\n  },\r\n  methods: {\r\n    //搜索按钮\r\n    searchBtn() {\r\n      if (this.searchName === \"\") {\r\n        this.getIntegralProductList(this.currentPage, this.pageSize);\r\n      } else {\r\n        searchIntegralProduct(this.searchName).then(res => {\r\n          if (res.data.code === 200) {\r\n            this.tableData = res.data.data.integralProductList;\r\n            this.total = res.data.data.total;\r\n          } else {\r\n            this.tableData = [];\r\n            this.total = 0;\r\n          }\r\n        });\r\n      }\r\n    },\r\n    //添加兑换产品按钮\r\n    addConversionBtn() {\r\n      if (this.add_name === \"\") {\r\n        this.$message({\r\n          message: \"产品名不能为空\",\r\n          type: \"warning\"\r\n        });\r\n        return;\r\n      }\r\n      if (this.add_integral === \"\") {\r\n        this.$message({\r\n          message: \"所需积分不能为空\",\r\n          type: \"warning\"\r\n        });\r\n        return;\r\n      }\r\n      addIntegralProduct(this.add_name, this.add_integral).then(res => {\r\n        if (res.data.code === 200) {\r\n          this.$message({\r\n            message: \"添加成功!\",\r\n            type: \"success\"\r\n          });\r\n          this.addBounced = false;\r\n          this.getIntegralProductList(this.currentPage, this.pageSize);\r\n        } else {\r\n          this.$message.error(\"添加失败!\");\r\n        }\r\n      });\r\n    },\r\n    //兑换按钮\r\n    conversionBtn(row) {\r\n      this.$prompt(\"请输入会员手机号\", \"提示\", {\r\n        confirmButtonText: \"确定\",\r\n        cancelButtonText: \"取消\"\r\n      }).then(({ value }) => {\r\n        conversion(value, row.conversion_integral, row.convertibility_id).then(\r\n          res => {\r\n            if (res.data.code === 200) {\r\n              this.$message({\r\n                type: \"success\",\r\n                message: res.data.msg\r\n              });\r\n            } else {\r\n              this.$message.error(res.data.msg);\r\n            }\r\n          }\r\n        );\r\n      });\r\n    },\r\n    //选中表格后执行\r\n    handleCurrentChange(val) {\r\n      this.currentRow = val;\r\n    },\r\n    getIntegralProductList(currentPage, pageSize) {\r\n      integralProductList(currentPage, pageSize).then(res => {\r\n        if (res.data.code === 200) {\r\n          this.tableData = res.data.data.integralProductList;\r\n          this.total = res.data.data.total;\r\n        } else {\r\n          this.tableData = [];\r\n          this.total = 0;\r\n        }\r\n      });\r\n    },\r\n    exportExcel() {\r\n      /* out-table关联导出的dom节点  */\r\n      var wb = XLSX.utils.table_to_book(document.querySelector(\"#out-table\"));\r\n      /* get binary string as output */\r\n      var wbout = XLSX.write(wb, {\r\n        bookType: \"xlsx\",\r\n        bookSST: true,\r\n        type: \"array\"\r\n      });\r\n      try {\r\n        FileSaver.saveAs(\r\n          new Blob([wbout], { type: \"application/octet-stream\" }),\r\n          \"兑换产品列表.xlsx\"\r\n        );\r\n      } catch (e) {\r\n        if (typeof console !== \"undefined\") console.log(e, wbout);\r\n      }\r\n      return wbout;\r\n    },\r\n    //产品删除\r\n    handleDelete() {\r\n      if (this.currentRow) {\r\n        this.$confirm(\"此操作将删除该产品不可复原, 是否继续?\", \"提示\", {\r\n          confirmButtonText: \"确定\",\r\n          cancelButtonText: \"取消\",\r\n          type: \"warning\"\r\n        }).then(() => {\r\n          deleteIntegralProduct(this.currentRow.convertibility_id).then(res => {\r\n            if (res.data.code === 200) {\r\n              this.$message({\r\n                message: \"删除成功!\",\r\n                type: \"success\"\r\n              });\r\n              this.getIntegralProductList(this.currentPage, this.pageSize);\r\n            } else {\r\n              this.$message.error(\"删除失败,请稍后再试!\");\r\n            }\r\n          });\r\n        });\r\n      }\r\n    },\r\n    //分页功能\r\n    currentChange(val) {\r\n      this.currentPage = val;\r\n      this.getIntegralProductList(this.currentPage, this.pageSize);\r\n    },\r\n    //编辑的保存按钮\r\n    handleRedact() {\r\n      if (this.edit_name === \"\") {\r\n        this.$message({\r\n          message: \"产品名不能为空\",\r\n          type: \"warning\"\r\n        });\r\n        return;\r\n      }\r\n      if (this.edit_integral === \"\") {\r\n        this.$message({\r\n          message: \"所需积分不能为空\",\r\n          type: \"warning\"\r\n        });\r\n        return;\r\n      }\r\n      revampIntegralProduct(\r\n        this.edit_name,\r\n        this.edit_integral,\r\n        this.currentRow.convertibility_id\r\n      ).then(res => {\r\n        if (res.data.code === 200) {\r\n          this.$message({\r\n            message: \"修改成功\",\r\n            type: \"success\"\r\n          });\r\n          this.getIntegralProductList(this.currentPage, this.pageSize);\r\n          this.editBounced = false;\r\n        } else {\r\n          this.$message.error(\"修改失败,请稍后再试!\");\r\n        }\r\n      });\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.el-container {\r\n  width: 100%;\r\n  height: 100%;\r\n  .el-header {\r\n    padding: 0 20px;\r\n    background-color: white;\r\n    font-size: 20px;\r\n    font-weight: bold;\r\n    display: flex;\r\n    justify-content: flex-start;\r\n    align-items: center;\r\n    .searchName {\r\n      width: 30%;\r\n      margin-left: 20px;\r\n    }\r\n  }\r\n  .el-main {\r\n    margin-top: 20px;\r\n    background-color: white;\r\n    .bottons {\r\n      margin-bottom: 20px;\r\n    }\r\n    .pagination {\r\n      display: flex;\r\n      justify-content: flex-end;\r\n      align-items: center;\r\n      margin-top: 30px;\r\n    }\r\n  }\r\n  .imagePreviewBounced {\r\n    /deep/ .el-dialog__header {\r\n      padding: 0;\r\n    }\r\n    /deep/ .el-dialog__body {\r\n      font-size: 0;\r\n      padding: 0;\r\n      text-align: center;\r\n    }\r\n  }\r\n  /deep/ .el-dialog__title {\r\n    font-weight: bold;\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js!../../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./integral.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js!../../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./integral.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./integral.vue?vue&type=template&id=8be81dbe&scoped=true&\"\nimport script from \"./integral.vue?vue&type=script&lang=js&\"\nexport * from \"./integral.vue?vue&type=script&lang=js&\"\nimport style0 from \"./integral.vue?vue&type=style&index=0&id=8be81dbe&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"8be81dbe\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}