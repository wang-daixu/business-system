(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9cda3778"],{"0861":function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"c",(function(){return l})),a.d(t,"b",(function(){return s}));a("6a61");var n=a("327b"),r=a("b775");function i(e,t,a,n){return c.apply(this,arguments)}function c(){return c=Object(n["a"])(regeneratorRuntime.mark((function e(t,a,n,i){var c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return c=r["a"].request({method:"get",url:"/console/addOrderForm",params:{product_id:t,kind:a,member_phone:n,exchangeIntegral:i}}),e.abrupt("return",c);case 2:case"end":return e.stop()}}),e)}))),c.apply(this,arguments)}function l(e,t){return o.apply(this,arguments)}function o(){return o=Object(n["a"])(regeneratorRuntime.mark((function e(t,a){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=r["a"].request({method:"get",url:"/console/orderFormList",params:{currentPage:t,pageSize:a}}),e.abrupt("return",n);case 2:case"end":return e.stop()}}),e)}))),o.apply(this,arguments)}function s(e,t,a){return u.apply(this,arguments)}function u(){return u=Object(n["a"])(regeneratorRuntime.mark((function e(t,a,n){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=r["a"].request({method:"get",url:"/console/deleteOrderForm",params:{orderForm_id:t,member_phone:a,exchangeIntegral:n}}),e.abrupt("return",i);case 2:case"end":return e.stop()}}),e)}))),u.apply(this,arguments)}},5277:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-header",{attrs:{height:"100px"}},[a("div",[e._v(" 产品名称 "),a("el-autocomplete",{attrs:{"fetch-suggestions":e.querySearchAsync,placeholder:"请输入内容"},on:{select:e.handleSelect,change:e.handleSelect},model:{value:e.searchName,callback:function(t){e.searchName=t},expression:"searchName"}})],1),a("div",[e._v(" 产品分类 "),a("el-select",{attrs:{placeholder:"请选择"},on:{change:e.hanldeClassify},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)]),a("el-main",[a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"",stripe:"",id:"out-table"}},[a("el-table-column",{attrs:{prop:"product_id",label:"产品编号",width:"80"}}),a("el-table-column",{attrs:{prop:"product_img",label:"产品图片",width:"135"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("el-image",{staticStyle:{width:"110px",height:"110px"},attrs:{src:"http://qi4h218o0.hd-bkt.clouddn.com/"+e.row.product_img,"preview-src-list":["http://qi4h218o0.hd-bkt.clouddn.com/"+e.row.product_img],fit:"cover"}})]}}])}),a("el-table-column",{attrs:{prop:"product_name",label:"产品名称",width:"180"}}),a("el-table-column",{attrs:{prop:"product_detailed",label:"产品内容",width:"300"}}),a("el-table-column",{attrs:{prop:"purchasing_price",label:"进价",width:"180"}}),a("el-table-column",{attrs:{prop:"selling_price",label:"售价",width:"180"}}),a("el-table-column",{attrs:{prop:"classify",label:"类别",width:"180"}}),a("el-table-column",{attrs:{prop:"exchangeIntegral",label:"获得积分",width:"100"}}),a("el-table-column",{attrs:{prop:"inventory",label:"库存",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{value:0===t.row.inventory,"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(a){return e.handleInventory(t.row)}}})]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){return e.handleAdd(t.$index,t.row)}}},[e._v("加入订单")])]}}])})],1)],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.pageSize,layout:"total,prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1)]),a("el-dialog",{attrs:{title:"订单录入",visible:e.addBounced,width:"40%","destroy-on-close":""},on:{"update:visible":function(t){e.addBounced=t}}},[a("el-form",{attrs:{"label-position":"right","label-width":"80px"}},[a("el-form-item",{attrs:{label:"产品图片"}},[a("el-image",{staticStyle:{width:"50%"},attrs:{src:e.product_img,fit:"contain"}})],1),a("el-form-item",{attrs:{label:"产品名称"}},[a("el-input",{attrs:{disabled:""},model:{value:e.product_name,callback:function(t){e.product_name=t},expression:"product_name"}})],1),a("el-form-item",{attrs:{label:"获得积分"}},[a("el-input",{attrs:{disabled:""},model:{value:e.exchangeIntegral,callback:function(t){e.exchangeIntegral=t},expression:"exchangeIntegral"}})],1),a("el-form-item",{attrs:{label:"订单种类"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.kindValue,callback:function(t){e.kindValue=t},expression:"kindValue"}},e._l(e.kindList,(function(e){return a("el-option",{key:e.value,attrs:{value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"会员手机"}},[a("el-input",{model:{value:e.member_phone,callback:function(t){e.member_phone=t},expression:"member_phone"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addBounced=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"success",plain:""},on:{click:function(t){return e.handleSave()}}},[e._v("添加")])],1)],1)],1)},r=[],i=a("c4c8"),c=a("0861"),l={data:function(){return{searchName:"",options:[],value:"",tableData:[],currentPage:1,pageSize:6,total:0,pagingCall:0,addBounced:!1,product_name:"",product_id:null,product_img:"",member_phone:"",exchangeIntegral:0,kindValue:"堂食/打包",kindList:[{value:"堂食/打包"},{value:"美团"},{value:"饿了么"},{value:"其他"}]}},created:function(){var e=this;Object(i["g"])().then((function(t){e.options=t.data.data.classifyList})),Object(i["i"])(this.currentPage,this.pageSize).then((function(t){200===t.data.code&&(e.tableData=t.data.data.productList,e.total=t.data.data.total)}))},methods:{handleInventory:function(e){var t=this;Object(i["n"])(e.inventory,e.product_id).then((function(e){200===e.data.code?(t.$message({message:"修改成功!",type:"success"}),Object(i["i"])(t.currentPage,t.pageSize).then((function(e){200===e.data.code&&(t.tableData=e.data.data.productList,t.total=e.data.data.total)}))):t.$message.error("服务器繁忙,请稍后再试")}))},querySearchAsync:function(e,t){var a=[{}];Object(i["q"])(e).then((function(e){a=e.data.data.searchList,t(a)})).catch((function(e){console.log(e)}))},handleSelect:function(e){var t=this;this.currentPage=1,Object(i["j"])(this.searchName,this.currentPage,this.pageSize).then((function(e){200===e.data.code?(t.pagingCall=1,t.tableData=e.data.data.productList,t.total=e.data.data.total,t.$message({message:"查询成功!",type:"success"})):t.$message("未查询到该产品!")}))},hanldeClassify:function(e){var t=this;this.currentPage=1,Object(i["h"])(e,this.currentPage,this.pageSize).then((function(e){200===e.data.code?(t.tableData=e.data.data.productList,t.total=e.data.data.total,t.pagingCall=2,t.$message({message:"查询成功!",type:"success"})):t.$message("该分类未添加产品!")}))},handleCurrentChange:function(e){var t=this;this.currentPage=e,0===this.pagingCall?Object(i["i"])(this.currentPage,this.pageSize).then((function(e){t.tableData=e.data.data.productList})):1===this.pagingCall?Object(i["j"])(this.searchName,this.currentPage,this.pageSize).then((function(e){200===e.data.code&&(t.tableData=e.data.data.productList)})):2===this.pagingCall&&Object(i["h"])(item,this.currentPage,this.pageSize).then((function(e){t.tableData=e.data.data.productList}))},handleAdd:function(e,t){var a=this;this.kindValue="堂食/打包",this.member_phone="",this.product_id=t.product_id,this.product_name=t.product_name,this.exchangeIntegral=t.exchangeIntegral,this.product_img="http://qi4h218o0.hd-bkt.clouddn.com/"+t.product_img,1===t.inventory?this.$confirm("该产品库存不足, 是否继续?","库存提醒",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){a.addBounced=!0})):this.addBounced=!0},handleSave:function(){var e=this;Object(c["a"])(this.product_id,this.kindValue,this.member_phone,this.exchangeIntegral).then((function(t){201===t.data.code?e.$message.error(t.data.msg):(t.data.data.integral?e.$message({message:"下单成功!该会员积分余额:"+t.data.data.integral,type:"success"}):e.$message({message:"下单成功!",type:"success"}),e.addBounced=!1)}))}}},o=l,s=(a("bb22"),a("9ca4")),u=Object(s["a"])(o,n,r,!1,null,"1937214f",null);t["default"]=u.exports},"571c":function(e,t,a){},bb22:function(e,t,a){"use strict";var n=a("571c"),r=a.n(n);r.a}}]);
//# sourceMappingURL=chunk-9cda3778.c42bd3af.js.map