(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-687ec81e"],{"074e":function(e,t,a){},"146e":function(e,t,a){"use strict";var n=a("074e"),i=a.n(n);i.a},"513c":function(e,t,a){"use strict";var n=a("1e2c"),i=a("d890"),l=a("e8d6"),r=a("1944"),o=a("faa8"),c=a("2118"),s=a("7063"),u=a("9f67"),d=a("efe2"),p=a("6d60"),g=a("b338").f,f=a("aa6b").f,h=a("d910").f,m=a("c10f").trim,b="Number",v=i[b],y=v.prototype,_=c(p(y))==b,L=function(e){var t,a,n,i,l,r,o,c,s=u(e,!1);if("string"==typeof s&&s.length>2)if(s=m(s),t=s.charCodeAt(0),43===t||45===t){if(a=s.charCodeAt(2),88===a||120===a)return NaN}else if(48===t){switch(s.charCodeAt(1)){case 66:case 98:n=2,i=49;break;case 79:case 111:n=8,i=55;break;default:return+s}for(l=s.slice(2),r=l.length,o=0;o<r;o++)if(c=l.charCodeAt(o),c<48||c>i)return NaN;return parseInt(l,n)}return+s};if(l(b,!v(" 0o1")||!v("0b1")||v("+0x1"))){for(var A,w=function(e){var t=arguments.length<1?0:e,a=this;return a instanceof w&&(_?d((function(){y.valueOf.call(a)})):c(a)!=b)?s(new v(L(t)),a,w):L(t)},k=n?g(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),x=0;k.length>x;x++)o(v,A=k[x])&&!o(w,A)&&h(w,A,f(v,A));w.prototype=y,y.constructor=w,r(i,b,w)}},7063:function(e,t,a){var n=a("a719"),i=a("50fb");e.exports=function(e,t,a){var l,r;return i&&"function"==typeof(l=t.constructor)&&l!==a&&n(r=l.prototype)&&r!==a.prototype&&i(e,r),e}},"88a3":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-header",{attrs:{height:"100px"}},[a("div",[e._v(" 产品名称 "),a("el-autocomplete",{attrs:{"fetch-suggestions":e.querySearchAsync,placeholder:"请输入内容"},on:{select:e.handleSelect,change:e.handleSelect},model:{value:e.searchName,callback:function(t){e.searchName=t},expression:"searchName"}})],1),a("div",[e._v(" 产品分类 "),a("el-select",{attrs:{placeholder:"请选择"},on:{change:e.hanldeClassify},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)]),a("el-main",[a("div",{staticClass:"bottons"},[a("el-button",{attrs:{type:"success",round:"",plain:""},on:{click:function(t){return e.$router.push({name:"AddProduct"})}}},[e._v("添加产品")]),a("el-button",{attrs:{type:"primary",round:"",plain:""},on:{click:function(t){return e.$router.push({name:"Classify"})}}},[e._v("分类管理")]),a("el-button",{attrs:{type:"warning",round:"",plain:""},on:{click:function(t){return e.exportExcel()}}},[e._v("导出")]),a("el-button",{attrs:{type:"danger",round:"",plain:""},on:{click:function(t){return e.resetTable()}}},[e._v("重置")])],1),a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"",stripe:"",id:"out-table"}},[a("el-table-column",{attrs:{prop:"product_id",label:"产品编号",width:"80"}}),a("el-table-column",{attrs:{prop:"product_name",label:"产品名称",width:"180"}}),a("el-table-column",{attrs:{prop:"product_detailed",label:"产品内容",width:"300"}}),a("el-table-column",{attrs:{prop:"purchasing_price",label:"进价",width:"180"}}),a("el-table-column",{attrs:{prop:"selling_price",label:"售价",width:"180"}}),a("el-table-column",{attrs:{prop:"classify",label:"类别",width:"180"}}),a("el-table-column",{attrs:{prop:"exchangeIntegral",label:"获得积分",width:"100"}}),a("el-table-column",{attrs:{prop:"product_img",label:"产品图片",width:"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"imagePreview",on:{click:function(a){return e.handleImagePreview(t.$index,t.row)}}},[e._v(" 点击查看 ")])]}}])}),a("el-table-column",{attrs:{prop:"inventory",label:"库存",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{value:0===t.row.inventory,"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(a){return e.handleInventory(t.row)}}})]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1)],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.pageSize,layout:"total,prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1)]),a("el-dialog",{attrs:{title:"产品编辑",visible:e.editBounced,width:"60%","destroy-on-close":""},on:{"update:visible":function(t){e.editBounced=t}}},[a("el-form",{attrs:{"label-position":"right","label-width":"80px",model:e.formLabelAlign}},[a("el-form-item",{attrs:{label:"产品图片"}},[a("el-upload",{attrs:{action:"http://up-z0.qiniu.com",accept:"image/jpeg,image/gif,image/png,image/bmp","show-file-list":!1,data:e.uploadData,"on-success":e.handleSuccess,"on-error":e.uploadError,"before-upload":e.beforeUpload,limit:1}},[a("el-image",{staticStyle:{width:"200px"},attrs:{src:e.qiniuConfig.qiniuPath+e.formLabelAlign.productImg,fit:"scale-down"}})],1)],1),a("el-form-item",{attrs:{label:"产品名称"}},[a("el-input",{model:{value:e.formLabelAlign.product_name,callback:function(t){e.$set(e.formLabelAlign,"product_name",t)},expression:"formLabelAlign.product_name"}})],1),a("el-form-item",{attrs:{label:"产品内容"}},[a("el-input",{attrs:{type:"textarea",rows:5},model:{value:e.formLabelAlign.product_detailed,callback:function(t){e.$set(e.formLabelAlign,"product_detailed",t)},expression:"formLabelAlign.product_detailed"}})],1),a("el-form-item",{attrs:{label:"产品进价"}},[a("el-input",{staticClass:"price",model:{value:e.formLabelAlign.purchasing_price,callback:function(t){e.$set(e.formLabelAlign,"purchasing_price",t)},expression:"formLabelAlign.purchasing_price"}})],1),a("el-form-item",{attrs:{label:"产品售价"}},[a("el-input",{staticClass:"price",model:{value:e.formLabelAlign.selling_price,callback:function(t){e.$set(e.formLabelAlign,"selling_price",t)},expression:"formLabelAlign.selling_price"}})],1),a("el-form-item",{attrs:{label:"产品分类"}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:e.changeSelect},model:{value:e.formLabelAlign.classify,callback:function(t){e.$set(e.formLabelAlign,"classify",t)},expression:"formLabelAlign.classify"}},e._l(e.formLabelAlign.classifyList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"获得积分"}},[a("el-input",{staticClass:"price",model:{value:e.formLabelAlign.exchangeIntegral,callback:function(t){e.$set(e.formLabelAlign,"exchangeIntegral",t)},expression:"formLabelAlign.exchangeIntegral"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.editBounced=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"success",plain:""},on:{click:function(t){return e.handleRedact()}}},[e._v("保存")])],1)],1),a("el-dialog",{staticClass:"imagePreviewBounced",attrs:{visible:e.imagePreview,"show-close":!1},on:{"update:visible":function(t){e.imagePreview=t}}},[a("el-image",{staticStyle:{width:"100%",height:"70vh"},attrs:{src:e.dialogImageUrl,fit:"scale-down"}})],1)],1)},i=[],l=a("c4c8"),r=a("ca00"),o=a("ecc0"),c=a.n(o),s=a("d85b"),u=a.n(s),d={data:function(){return{searchName:"",options:[],value:"",tableData:[],currentPage:1,pageSize:10,total:0,pagingCall:0,editBounced:!1,imagePreview:!1,dialogImageUrl:"",formLabelAlign:{productImg:null,product_id:null,product_name:"",product_detailed:null,purchasing_price:null,selling_price:null,classify:null,classify_id:null,exchangeIntegral:null,classifyList:[]},uploadData:{key:"",token:""},qiniuConfig:{qiniuPath:"http://qi4h218o0.hd-bkt.clouddn.com/"}}},created:function(){var e=this;Object(l["l"])().then((function(t){if(200===t.data.code){if(localStorage.getItem("token")!==t.data.data)return void e.$router.go(0);Object(l["g"])().then((function(t){e.options=t.data.data.classifyList})),Object(l["i"])(e.currentPage,e.pageSize).then((function(t){200===t.data.code&&(e.tableData=t.data.data.productList,e.total=t.data.data.total)})),Object(l["c"])().then((function(t){e.formLabelAlign.classifyList=t.data.data})),Object(l["k"])().then((function(t){200===t.data.code&&(e.uploadData.token=t.data.data.uploadToken)}))}else e.$router.go(0)}))},methods:{handleSuccess:function(e,t,a){var n=this;this.formLabelAlign.productImg=e.key,Object(l["p"])(e.key,this.formLabelAlign.product_id).then((function(e){200===e.data.code&&Object(l["i"])(n.currentPage,n.pageSize).then((function(e){200===e.data.code&&(n.tableData=e.data.data.productList,n.total=e.data.data.total)}))})),this.$message({message:"修改成功",type:"success"})},beforeUpload:function(e){var t="image/png"===e.type,a="image/jpeg"===e.type,n="image/jpg"===e.type,i=e.size/1024/1024<2;if(!t&&!a&&!n)return this.$message.error("上传头像图片只能是 jpg、png、jpeg 格式!"),!1;if(!i)return this.$message.error("上传头像图片大小不能超过 2MB!"),!1;this.uploadData.key="";for(var l=0;l<5;l++)this.uploadData.key=this.uploadData.key+Object(r["b"])(0,9);this.uploadData.key="".concat((new Date).getTime())+this.uploadData.key},uploadError:function(e,t,a){this.$message({message:"上传出错，请重试！",type:"error",center:!0})},changeSelect:function(e){this.formLabelAlign.classify_id=e},resetTable:function(){var e=this;this.value="",this.searchName="",Object(l["i"])(this.currentPage,this.pageSize).then((function(t){200===t.data.code&&(e.tableData=t.data.data.productList,e.total=t.data.data.total)}))},handleImagePreview:function(e,t){this.dialogImageUrl="http://qi4h218o0.hd-bkt.clouddn.com/"+t.product_img,this.imagePreview=!0},handleInventory:function(e){var t=this;Object(l["n"])(e.inventory,e.product_id).then((function(e){200===e.data.code?(t.$message({message:"修改成功!",type:"success"}),Object(l["i"])(t.currentPage,t.pageSize).then((function(e){200===e.data.code&&(t.tableData=e.data.data.productList,t.total=e.data.data.total)}))):t.$message.error("服务器繁忙,请稍后再试")}))},exportExcel:function(){var e=u.a.utils.table_to_book(document.querySelector("#out-table")),t=u.a.write(e,{bookType:"xlsx",bookSST:!0,type:"array"});try{c.a.saveAs(new Blob([t],{type:"application/octet-stream"}),"产品信息.xlsx")}catch(a){"undefined"!==typeof console&&console.log(a,t)}return t},querySearchAsync:function(e,t){var a=[{}];Object(l["q"])(e).then((function(e){a=e.data.data.searchList,t(a)})).catch((function(e){console.log(e)}))},handleSelect:function(e){var t=this;this.currentPage=1,Object(l["j"])(this.searchName,this.currentPage,this.pageSize).then((function(e){200===e.data.code?(t.pagingCall=1,t.tableData=e.data.data.productList,t.total=e.data.data.total,t.$message({message:"查询成功!",type:"success"})):t.$message("未查询到该产品!")}))},hanldeClassify:function(e){var t=this;this.currentPage=1,Object(l["h"])(e,this.currentPage,this.pageSize).then((function(e){200===e.data.code?(t.tableData=e.data.data.productList,t.total=e.data.data.total,t.pagingCall=2,t.$message({message:"查询成功!",type:"success"})):t.$message("该分类未添加产品!")}))},handleEdit:function(e,t){this.formLabelAlign.productImg=t.product_img,this.formLabelAlign.product_id=t.product_id,this.formLabelAlign.product_name=t.product_name,this.formLabelAlign.product_detailed=t.product_detailed,this.formLabelAlign.purchasing_price=t.purchasing_price,this.formLabelAlign.selling_price=t.selling_price,this.formLabelAlign.classify=t.classify,this.formLabelAlign.classify_id=t.classify_id,this.formLabelAlign.exchangeIntegral=t.exchangeIntegral,this.editBounced=!0},handleDelete:function(e,t){var a=this;this.$confirm("此操作将删除该产品不可复原, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(l["f"])(t.product_id,t.product_img).then((function(e){200===e.data.code?(a.$message({message:"删除成功!",type:"success"}),Object(l["i"])(a.currentPage,a.pageSize).then((function(e){200===e.data.code?(a.tableData=e.data.data.productList,a.total=e.data.data.total):a.tableData=[]}))):a.$message.error("删除失败,请稍后再试!")}))}))},handleCurrentChange:function(e){var t=this;this.currentPage=e,0===this.pagingCall?Object(l["i"])(this.currentPage,this.pageSize).then((function(e){t.tableData=e.data.data.productList})):1===this.pagingCall?Object(l["j"])(this.searchName,this.currentPage,this.pageSize).then((function(e){200===e.data.code&&(t.tableData=e.data.data.productList)})):2===this.pagingCall&&Object(l["h"])(item,this.currentPage,this.pageSize).then((function(e){t.tableData=e.data.data.productList}))},handleRedact:function(){var e=this;""!==this.formLabelAlign.product_name?Object(l["o"])(this.formLabelAlign.product_name,this.formLabelAlign.product_detailed,this.formLabelAlign.purchasing_price,this.formLabelAlign.selling_price,this.formLabelAlign.classify_id,this.formLabelAlign.product_id,this.formLabelAlign.exchangeIntegral).then((function(t){200===t.data.code?(e.$message({showClose:!0,message:"保存成功!",type:"success"}),e.editBounced=!1,Object(l["i"])(e.currentPage,e.pageSize).then((function(t){200===t.data.code&&(e.tableData=t.data.data.productList,e.total=t.data.data.total)}))):e.$message({showClose:!0,message:"服务器繁忙,请稍后再试!",type:"error"})})):this.$message({showClose:!0,message:"产品名不能为空!",type:"warning"})}}},p=d,g=(a("146e"),a("9ca4")),f=Object(g["a"])(p,n,i,!1,null,"20b53a3c",null);t["default"]=f.exports},c10f:function(e,t,a){var n=a("2732"),i=a("fc8c"),l="["+i+"]",r=RegExp("^"+l+l+"*"),o=RegExp(l+l+"*$"),c=function(e){return function(t){var a=String(n(t));return 1&e&&(a=a.replace(r,"")),2&e&&(a=a.replace(o,"")),a}};e.exports={start:c(1),end:c(2),trim:c(3)}},ca00:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return i}));a("513c");function n(e,t){return Math.floor(Math.random()*(t-e+1))+e}function i(e,t){var a=[31,28,31,30,31,30,31,31,30,31,30,31];return Number(e)%4!==0||Number(e)%100===0&&Number(e)%400!==0||(a[1]=29),a[Number(t-1)]}},fc8c:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"}}]);
//# sourceMappingURL=chunk-687ec81e.7225f1b5.js.map